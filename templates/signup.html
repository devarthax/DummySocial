{% extends "base.html" %}
{% block titlePage %}Signup{% endblock %}

{% block content %}

    {% with messages = get_flashed_messages() %}
        {% if messages %}
        
            {% for message in messages %}
                <p style="color: red"><b>{{ message }}</b></p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <h3><b>Vuoi essere dei nostri? Dicci un po' di te!</b></h3>
    <form class="form-horizontal" enctype=multipart/form-data action="#" method="post">
        
        <div class="form-group">
            <label class="control-label col-sm-2" for="email">Username:</label>
            
            <div class="col-sm-10">
                <input type="text" class="form-control" id="username" name="username" placeholder="Inserisci username" required>
            </div>
        </div>
        
        <div class="form-group">
            <label class="control-label col-sm-2" for="email">Email:</label>
            
            <div class="col-sm-10">
                <input type="email" class="form-control" id="email" name="email" placeholder="Inserisci mail" required>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-2" for="pwd">Password:</label>
            <div class="col-sm-10">
                <input type="password" class="form-control" id="pwd" name="password" placeholder="Inserisci password" 
                    required>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-2" for="file">Foto profilo:</label>
            <div class="col-sm-10">
                <input type="file" class="form-control" id="file" name="propic" required/>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button id="submit" type="submit" class="btn btn-primary" disabled>Iscriviti</button>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <p><b>Attenzione: </b> la password deve contenere: </p>
                <ul class="list-group">
                    <li class="list-group-item">Tra gli 8 e i 12 caratteri</li>
                    <li class="list-group-item">Almeno una lettera maiuscola ed una minuscola</li>
                    <li class="list-group-item">Almeno un simbolo speciale (!, @, #, $, %, ^, &, *, _, =, +, -) 
                        ed una cifra (0-9)</li>
                </ul>
            </div>
        </div>
  </form>


  <script defer>
    const submit = document.querySelector("#submit");
    const password = document.querySelector("#pwd");
    password.addEventListener("input", function () {
        regex = new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$');
        let passwordValue = password.value;
        
        if (regex.test(passwordValue))
            submit.disabled = false;
        else
            submit.disabled = true;

    })
  </script>
{% endblock %}